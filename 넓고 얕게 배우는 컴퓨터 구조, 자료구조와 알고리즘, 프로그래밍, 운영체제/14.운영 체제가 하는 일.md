# 14. 운영 체제가 하는 일

## 용어

- 프로세스(Process): 실행되고 있는 하나의 프로그램, 어플리케이션. === 테스크(Task)
- 스레드(Thread): 프로그램 실행의 흐름을 단위로 표현한 것. 스레드 단위로 실행된다고 말한다.

## 운영 체제는?

접근제어, 동기화, 전산 자원(CPU, RAM 등) 등을 관리하는 것이다.

### 프로그램 관리

- CPU가 컴퓨터의 정체성을 결정한다.
- 이러한 하드웨어를 기반으로 운영체제라는 소프트웨어가 존재하고,
- 이걸 기반으로 어플리케이션이라는 프로세스가 존재한다.
- 프로세스 내부에는 스레드가 개별적인 흐름으로 존재한다.
- 스레드는 프로세스에 할당된 자원을 공유해서 같이 사용한다. (이때 동기화라는 개념이 중요하다.)

### 프로세스 관리

- CPU의 개수는 한정적이기 때문에 프로세스의 관리를 위해서는 CPU를 나눠써야 할 수 밖에 없다. === 공유해야 한다.
- 공유에서 가장 중요한 것은 동시성이며, 동시성에서는 동기화가 중요하다.

### 컴퓨터 자원 관리

- 가장 중요한 전산자원은 CPU와 메모리(RAM)이다. 운영체제는 CPU와 RAM을 프로세스에게 분배한다.
- 프로세스는 힙 공간과 실행코드 영역을 갖고, 스레드는 스택 구조로 관리된다. 이 모든 것은 가상 메모리로 관리된다.

#### 가상 메모리 시스템

- 가상 메모리 시스템은 메모리를 효율적으로 사용하기 위해, RAM과 HDD를 합쳐 하나의 논리적 메모리로 추상화하여 메모리를 관리하는 방법이다.
- 운영체제는 모든 메모리를 페이지 단위로 관리하고, 페이지는 Paged될 수 있는 페이징 풀 영역과 절대 Paged 되면 안되는 비페이징 풀 영역으로 구성되어 있다. (윈도우는 페이지당 4KB의 메모리를 가진다.)
  - 운영체제는 현재 사용하고 있는 애플리케이션은 Page에 담고, 메모리가 부족할 경우 실행되고 있지 않은 애플리케이션을 메모리 바깥 영역에 옮겨 Page Out 또는 Swap Out 시킨다. 필요한 시기에 다시 메모리 영역으로 옮기는 Page In 또는 Swap Out 시키는 방식으로 메모리를 관리하고 있다.
- 가상 메모리 시스템을 사용하지 않으면, 각각의 프로세스가 4KB(윈도우)의 메모리를 가지기 때문에 200개의 프로세스가 실행 중이면 총 200\*4인 800KB의 메모리를 차지하게 된다.
- 즉, 가상 메모리 시스템을 사용하면 현재 실행되고 있는 것만 메모리를 차지하면 되기 때문에 큰 메모리가 소모되지 않아 효율적이며, 속도가 저하될 수는 있으나 프로세스가 몇개든 관계없이 실행될 수 있다는 장점이 있다.
