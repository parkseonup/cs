# 1. 컴퓨터가 3층집인건 알고 있죠?

- 컴퓨터는 하드웨어, 커널 모드, 유저 모드 계층으로 나눠져있다.
- 운영체제는 소프트웨어로, 프로세스가 잘 작동하도록 하드웨어를 제어 및 관리한다.

## 커널 모드와 유저모드

- 운영체제는 안정성을 위해 애플리케이션이 직접 하드웨어에 접근할 수 없도록 명령어를 실행하는 모드를 이중 모드로 나누어놨다.
- 즉, 컴퓨터가 CPU를 어떻게 사용하느냐에 따라 2가지 방식으로 컴퓨터를 제어한다.
  - 유저모드
    - 사용자와 데이터를 왔다갔다 할 수 있는 등의 작업을 한다.
    - CPU를 직접 컨트롤 할 수 없다.
  - 커널모드
    - 운영체제 내부에서 실제 하드웨어를 제어하는 작업을 한다.
    - CPU를 직접 컨트롤 할 수 있다.
- 요청에 따라서 모드의 전환이 이뤄진다. 이 요청은 시스템 콜을 통해 전환된다.

## 운영체제가 제어하는 과정

1. 프로세스에서 printF라는 API를 호출하면 API에 추상화된 file 인터페이스를 통해서 정보가 커널모드로 이동한다.

   - API는 내부적으로 커널 영역에서 실질적인 작업(Operation)이 수행되도록 하는 것이며,
   - 수행하기 위해 실행되는 함수를 시스템 콜(System Call)이라고 한다.
   - 시스템 콜을 통해 유저 영역에서 커널 영역으로 진입하게 된다.

2. 시스템 콜이 호출되면, 드라이버 내부에서는 필요한 인터럽트를 요청(IRQ, interrupt Request)한다.

   - IRQ에는 요청별로 번호가 있는데, 장치마다 다르다.

3. 인터럽트가 발생하면 CPU는 디바이스와 통신을 하고, 모니터에 printF에 담긴 내용이 출력된다.
4. 출력이 끝나면 디바이스는 할일이 끝났다고 인터럽트를 발생시킨다. 그럼 디바이스 드라이버는 커널의 요소에게 시스템 콜이 끝났다는 것을 알린다.

위 과정을 수행하는 과정에서 프로세스가 다음 작업을 하지 않고 대기를 하면 블로킹, 위 과정을 수행시켜놓고 다음 과정을 수행하면 논블로킹이다.

# 추가 자료 출처

- [운영체제: 유저모드, 커널모드, 시스템콜](https://coduking.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%9C%A0%EC%A0%80%EB%AA%A8%EB%93%9C-%EC%BB%A4%EB%84%90%EB%AA%A8%EB%93%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%BD%9C)
