# 4~5. CPU도 당신처럼 예측하고 미리 움직인다.

# 4. CPU도 당신처럼 예측하고 미리 움직인다.

캐시(cache)는 CPU의 Register와 RAM의 속도 차이를 완충하기 위해 메모리의 데이터를 미리 가져와 저장해두는 CPU의 임시 장소다.
CPU의 예측은 캐시에서 발생한다. (캐시가 RAM에서 미리 끌고 옴)

- 캐시 메모리는 데이터의 양 때문에 L1, L2, L3, 총 3가지 종류의 캐시를 가지고 있다.
  - CPU가 가진 여러개의 코어가 L3는 공유하고 L1, L2는 각각의 코어가 가지고 있는 등 CPU마다 다르다.
  - 주로 L1은 명령과 데이터를 나눠놓고, L2는 명령과 데이터를 같이 관리하고, L3는 모든 코어에 들어가야 할 데이터를 관리함
- 캐시 히트: 예측 적중
- 캐시 미스: 예측 실패

# 5. CPU도 당신처럼 예측하고 미리 움직인다. 두번째

기존에는 CPU가 RAM의 데이터를 가지고 와서 연산을 하는 구조였으나, 패러다임이 변화하고 있음.

## GPU (Graphic Processing Unit)

- CPU의 코어는 8~16개의 코어를 가지지만, GPU는 4천개 이상의 코어를 가진다.
- GPU는 CPU보다 느림
- 하지만 코어 개수가 극단적으로 많기 때문에, 서로 할 수 있는 역할이 다름. 병렬화에 좋음
- 작은 단위의 연산에 사용됨
- 그래픽, 이미지, 머신러닝와 관련된 연산에 사용
- 게임을 예로 들면, CPU는 물체의 위치, 룰(재화를 통한 구매) 등, GPU는 화면의 색상, 빛 효과 같은 이펙트

## PIM(Processing-In-Memory)

RAM에 연산 기능을 추가한 것

# 6. CPU가 예측해서 발생한 심각한 문제

## CPU 게이트 (보안문제)

1. 권한이 없는 유저(이하 해커)가 권한이 필요한 데이터를 요청하면 커널에서 권한이 없다는 것을 인지하고 CPU는 권한이 없다는 오류를 뱉지만, 권한 여부와 관계없이 연산은 한다.
2. 캐시는 연산된 값을 자동으로 저장한다.
3. 해커가 1의 데이터를 사용한 다른 연산을 요청한다.
4. 1의 데이터는 캐시에 저장됐기 때문에 커널을 거칠 필요가 없다. 따라서 권한 여부를 확인하지 못하고 캐시에서 데이터를 꺼내 연산하고 값을 전달한다.
5. 이제 해커가 RAM을 무작위로 검색한다. 검색했을 때 읽어들이는 속도가 다른 것보다 빠르면 캐시에 저장된 값이다. 이걸로 캐시에 저장된 값을 알 수 있다.

즉, 캐시는 시키지 않은 일을 해서 보안 문제가 발생할 수 있다.
