# 7.0. 프로세스와 스레드의 차이

- 프로세스 === 연산할 작업
- 프로세스는 한 개 이상의 스레드가 존재한다. 스레드가 여러개 존재할 경우 멀티스레드라고 한다.
  - 프로세스가 여러개면 멀티프로세스라고 한다.
- 스레드는 연산의 실행 흐름이다.
- 프로세스는 연산을 할 때 CPU와 RAM을 직접적으로 사용하는게 아니다. 특히 RAM의 경우 Virtual Memory를 사용한다.
  - Vitural Memory는 주기억장치와 보조기억장치를 합쳐서 메모리 공간을 효율적으로 사용할 수 있게 한다.
- 운영체제는 Virtual Memory를 프로세스에 할당한다.
  - Virtual Memory는 할당된 프로세스로 제한된 공간을 가진다.
  - 프로세스에 속한 모든 스레드는 프로세스의 Virtual Memory로 공간이 제약된다.
- 스레드마다 Thread Local Storage라는 개별적인 메모리 공간 에서 stack 구조로 메모리를 관리하고, 스레드끼리 메모리를 공유하는 공간은 Heap으로 관리함

## 가구로 든 예시

- 한 가구: Process
- 가구에 할당된 집: Virtual Memory
- 각 가구원: thread
- 부엌, 거실 등 공용 공간: Heap 구조
- 각 가구원 개인의 방: Thread Local Storage -> stack 구조

## 운영체제의 정책

1. 스레드 단위의 정책

   - 스레드에게 CPU를 줌
   - 일의 양을 잘라서 스레드별로 일을 나눠서 줌. 여러 스레드가 하나의 팀으로 각자 업무를 분장하고 리소스를 공유함.
   - virtual Memory를 하나만 주고, 여러 스레드가 공유해서 사용하도록 함
   - 윈도우 계열에서 사용하는 방식

2. 프로세스 단위의 정책

   - 프로세스에게 CPU를 줌
   - 팀으로 묶지 않고, 각자 따로 진행할 것이냐. 즉, 여러 스레드가 리소스를 공유하지 않음.
   - 각 스레드에 Virtual Memory가 각각 따로 부여됨
   - 각 스레드에 stack과 heap이 존재함
   - 리눅스 계열에서 사용하는 방식

## 참고

- [완전히 정복하는 프로세스 vs 스레드 개념](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4)
